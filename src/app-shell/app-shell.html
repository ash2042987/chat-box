<!-- IMPORTS -->
<!-- POLYMER -->
<link rel="import" href="../../bower_components/polymer/polymer.html">
<!-- FIREBASE -->
<link rel='import' href='../../bower_components/polymerfire/firebase-app.html'>
<link rel='import' href='../../bower_components/polymerfire/firebase-auth.html'>
<!-- CUSTOM ELEMENTS -->
<link rel="import" href="../app-shell/app-shell-toolbar.html">

<dom-module id="app-shell">
  <style>

  </style>
  <template>
    <!-- FIREBASE -->
    <firebase-app
      auth-domain="chat-box-217e3.firebaseapp.com"
      database-url="https://chat-box-217e3.firebaseio.com"
      api-key="AIzaSyCbZ-VSfxpUkq6-L028aDhhpf5JGqTrOOM">
    </firebase-app>

    <firebase-auth id="auth"
                  user="{{user}}"
                  provider="google"
                  signed-in="{{signedIn}}">
    </firebase-auth>

    <!-- APP --> 

    <app-shell-toolbar
      signed-in="[[signedIn]]"
      name="[[user.displayName]]">
    </app-shell-toolbar>

  </template>
  <script>
    Polymer({
      is: 'app-shell',

      properties: {
        signedIn: {
          type: Boolean
        },
        user: {
          type: Object
        }
      },

      listeners: {
        'sign-in': 'onSignIn',
        'sign-out': 'onSignOut'
      },

      onSignIn: function(){
        this.$.auth.signInWithPopup()
        .then(function(response) {
          console.log("Logged In Successfully!");
          console.log(this.user);
        })
        .catch(function(error) {
          console.log("Error");
          console.log(error)
        });
      },

      onSignOut: function(){
        this.$.auth.signOut()
        .then(function(response) {
          console.log("Logged Out Successfully!");
        })
        .catch(function(error) {
          console.log("Error");
          console.log(error)
        });
      }

    });
  </script>
</dom-module>
